<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººäº¤æ˜“å¤ç›˜ç³»ç»Ÿ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <style>
        :root {
            --primary: #2563eb;
            --profit: #ef4444; /* ç›ˆåˆ©çº¢ */
            --loss: #22c55e;   /* äºæŸç»¿ */
            --bg: #f1f5f9;
            --card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
        }

        * { box-sizing: border-box; font-family: 'PingFang SC', system-ui, sans-serif; }
        body { background: var(--bg); margin: 0; color: var(--text-main); }

        /* å¯¼èˆª */
        .navbar { 
            background: #fff; padding: 0.8rem 2rem; display: flex; 
            justify-content: space-between; align-items: center;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100;
        }
        .nav-links button { 
            background: none; border: 1px solid #e2e8f0; color: var(--text-muted);
            padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; transition: 0.3s;
        }
        .nav-links button.active { background: var(--primary); color: white; border-color: var(--primary); }

        .container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }

        /* å¡ç‰‡ */
        .card { 
            background: var(--card); padding: 1.5rem; border-radius: 12px; 
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); margin-bottom: 1.5rem;
        }

        /* ç»Ÿè®¡æ•°å­— */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
        .stat-item { background: var(--card); padding: 1.2rem; border-radius: 12px; text-align: center; }
        .stat-label { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 0.5rem; }
        .stat-value { font-size: 1.6rem; font-weight: 800; }

        /* å›¾è¡¨ */
        .chart-container { position: relative; height: 380px; width: 100%; }

        /* è¡¨æ ¼ */
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f8fafc; text-align: left; padding: 12px; font-size: 0.9rem; color: var(--text-muted); }
        td { padding: 12px; border-bottom: 1px solid #f1f5f9; }

        /* åˆ—è¡¨é¡¹ */
        .history-item { 
            display: flex; justify-content: space-between; padding: 1rem;
            border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 0.8rem;
            cursor: pointer; transition: 0.2s; background: white;
        }
        .history-item:hover { border-color: var(--primary); background: #f8fafc; }

        /* è¾…åŠ©ç±» */
        .profit { color: var(--profit); }
        .loss { color: var(--loss); }
        .badge { padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; color: white; font-weight: bold; }
        .bg-profit { background: var(--profit); }
        .bg-loss { background: var(--loss); }
    </style>
</head>
<body>

<nav class="navbar">
    <div style="font-weight: 900; color: var(--primary); font-size: 1.3rem;">TRADE OS</div>
    <div class="nav-links">
        <button id="nav-home" class="active" onclick="switchView('home')">é¦–é¡µæ±‡æ€»</button>
        <button id="nav-detail" onclick="switchView('detail')">æ¯æ—¥å¤ç›˜</button>
    </div>
</nav>

<div class="container">
    <div id="view-home">
        <div class="stats-grid">
            <div class="stat-item"><div class="stat-label">å½“å‰æ€»å‡€å€¼</div><div class="stat-value">Â¥108,330</div></div>
            <div class="stat-item"><div class="stat-label">æœ¬æœˆç´¯è®¡ç›ˆäº</div><div class="stat-value profit">+Â¥8,330</div></div>
            <div class="stat-item"><div class="stat-label">æœˆåº¦èƒœç‡</div><div class="stat-value">62.5%</div></div>
        </div>

        <div class="card">
            <h3 style="margin-top:0">ğŸ“ˆ èµ„äº§èµ°åŠ¿å›¾</h3>
            <div class="chart-container">
                <canvas id="assetChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-top:0">ğŸ“… å†å²è®°å½•</h3>
            <div id="history-list"></div>
        </div>
    </div>

    <div id="view-detail" style="display: none;">
        <div class="card" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <div>
                <label style="font-size: 0.9rem; font-weight: bold;">é€‰æ‹©å¤ç›˜æ—¥æœŸï¼š</label>
                <input type="date" id="date-selector" style="padding: 0.5rem; border-radius: 6px; border: 1px solid #ddd;" onchange="loadDetail(this.value)">
            </div>
            <h2 id="detail-date-display" style="margin:0">2023-10-27 å¤ç›˜</h2>
        </div>

        <div class="stats-grid">
            <div class="stat-item"><div class="stat-label">å½“æ—¥ç›ˆäº</div><div id="detail-profit" class="stat-value">--</div></div>
            <div class="stat-item"><div class="stat-label">æˆäº¤ç¬”æ•°</div><div id="detail-count" class="stat-value">0</div></div>
            <div class="stat-item"><div class="stat-label">æƒ…ç»ªå‹åŠ›</div><div class="stat-value">ä½ (å¹³ç¨³)</div></div>
        </div>

        <div class="card">
            <h3 style="margin-top:0">ğŸ“œ æˆäº¤æ˜ç»†</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr><th>æ ‡çš„</th><th>åŠ¨ä½œ</th><th>ä»·æ ¼</th><th>ç›ˆäº</th><th>é€»è¾‘åæ€</th></tr>
                    </thead>
                    <tbody id="detail-table"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // æ¨¡æ‹Ÿæ•°æ®æº
    const tradeData = {
        "2023-10-27": { profit: "+5,230", count: 2, items: [
            { name: "èµ›åŠ›æ–¯", act: "ä¹°å…¥", price: "82.50", change: "+3.5%", note: "çªç ´å½¢æ€ç¡®ç«‹" },
            { name: "å®å¾·æ—¶ä»£", act: "å–å‡º", price: "192.10", change: "-1.8%", note: "ç ´å‡çº¿æ­¢æŸ" }
        ]},
        "2023-10-26": { profit: "-1,100", count: 1, items: [
            { name: "è´µå·èŒ…å°", act: "å–å‡º", price: "1750", change: "-0.5%", note: "å¤§ç›˜ç¯å¢ƒä¸ä½³ï¼Œé˜²å¾¡ä¸ºä¸»" }
        ]}
    };

    const assetCurve = [
        { d: '10-20', v: 100000 }, { d: '10-21', v: 102500 }, { d: '10-22', v: 101800 },
        { d: '10-23', v: 105000 }, { d: '10-24', v: 104200 }, { d: '10-26', v: 103100 },
        { d: '10-27', v: 108330 }
    ];

    // åˆå§‹åŒ–å›¾è¡¨
    function renderChart() {
        const ctx = document.getElementById('assetChart').getContext('2d');
        const maxVal = Math.max(...assetCurve.map(o => o.v));
        
        new Chart(ctx, {
            type: 'line',
            plugins: [ChartDataLabels],
            data: {
                labels: assetCurve.map(o => o.d),
                datasets: [{
                    data: assetCurve.map(o => o.v),
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.05)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 6,
                    pointBackgroundColor: (c) => c.raw === maxVal ? '#ef4444' : '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                layout: { padding: { top: 35 } },
                plugins: {
                    legend: { display: false },
                    datalabels: {
                        align: 'top',
                        offset: 10,
                        font: { weight: 'bold', size: 12 },
                        formatter: (v) => 'Â¥' + (v/1000).toFixed(1) + 'k',
                        color: (c) => c.raw === maxVal ? '#ef4444' : '#64748b'
                    }
                },
                scales: {
                    y: { grid: { color: '#f1f5f9' }, ticks: { callback: v => v/10000 + 'ä¸‡' } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    // è§†å›¾åˆ‡æ¢
    function switchView(view) {
        document.getElementById('view-home').style.display = view === 'home' ? 'block' : 'none';
        document.getElementById('view-detail').style.display = view === 'detail' ? 'block' : 'none';
        document.getElementById('nav-home').className = view === 'home' ? 'active' : '';
        document.getElementById('nav-detail').className = view === 'detail' ? 'active' : '';
    }

    // åŠ è½½è¯¦æƒ…æ•°æ®
    function loadDetail(date) {
        const data = tradeData[date];
        const table = document.getElementById('detail-table');
        document.getElementById('detail-date-display').innerText = date + " å¤ç›˜";
        
        if(data) {
            document.getElementById('detail-profit').innerText = "Â¥" + data.profit;
            document.getElementById('detail-profit').className = "stat-value " + (data.profit.includes('+') ? 'profit' : 'loss');
            document.getElementById('detail-count').innerText = data.count;
            table.innerHTML = data.items.map(i => `
                <tr>
                    <td><b>${i.name}</b></td>
                    <td><span class="badge ${i.act==='ä¹°å…¥'?'bg-profit':'bg-loss'}">${i.act}</span></td>
                    <td>${i.price}</td>
                    <td class="${i.change.includes('+')?'profit':'loss'}">${i.change}</td>
                    <td style="color:#64748b; font-size:0.85rem">${i.note}</td>
                </tr>
            `).join('');
        } else {
            document.getElementById('detail-profit').innerText = "æ— æ•°æ®";
            document.getElementById('detail-count').innerText = "0";
            table.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:2rem; color:#94a3b8">è¯¥æ—¥æœŸæš‚æ— è®°å½•</td></tr>`;
        }
    }

    // é¦–é¡µåˆ—è¡¨æ¸²æŸ“
    function renderHistory() {
        const container = document.getElementById('history-list');
        container.innerHTML = Object.keys(tradeData).reverse().map(date => `
            <div class="history-item" onclick="quickView('${date}')">
                <span style="font-weight:bold">${date} äº¤æ˜“æ€»ç»“</span>
                <span class="${tradeData[date].profit.includes('+')?'profit':'loss'}" style="font-weight:800">
                    ${tradeData[date].profit}
                </span>
            </div>
        `).join('');
    }

    function quickView(date) {
        document.getElementById('date-selector').value = date;
        loadDetail(date);
        switchView('detail');
    }

    window.onload = () => {
        renderChart();
        renderHistory();
        loadDetail("2023-10-27");
    };
</script>

</body>
</html>
