<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‚¡ç¥¨äº¤æ˜“å¤ç›˜ç³»ç»Ÿ - Gemini Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --profit: #ef4444; /* Aè‚¡ä¹ æƒ¯ï¼šçº¢æ¶¨ */
            --loss: #22c55e;   /* Aè‚¡ä¹ æƒ¯ï¼šç»¿è·Œ */
            --bg: #f8fafc;
            --text: #1e293b;
            --card: #ffffff;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }

        body { background: var(--bg); margin: 0; color: var(--text); line-height: 1.6; }

        /* å¯¼èˆªæ  */
        .navbar { 
            background: #fff; 
            padding: 0.8rem 2rem; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
            position: sticky; 
            top: 0; 
            z-index: 100; 
        }

        .nav-links button { 
            background: none; 
            border: 1px solid var(--primary); 
            color: var(--primary); 
            padding: 0.5rem 1.2rem; 
            border-radius: 6px; 
            cursor: pointer; 
            margin-left: 10px; 
            transition: all 0.3s; 
            font-weight: 500;
        }

        .nav-links button.active { background: var(--primary); color: white; }

        .container { max-width: 1000px; margin: 2rem auto; padding: 0 1rem; }

        /* é€šç”¨å¡ç‰‡æ ·å¼ */
        .section { 
            background: var(--card); 
            padding: 1.5rem; 
            border-radius: 12px; 
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
        }

        /* é¦–é¡µç»Ÿè®¡ */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem; }
        .stat-card { background: var(--card); padding: 1.5rem; border-radius: 12px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .stat-card h3 { margin: 0; font-size: 0.9rem; color: #64748b; }
        .stat-card .value { font-size: 1.8rem; font-weight: 800; margin-top: 0.5rem; }

        /* å›¾è¡¨å®¹å™¨ */
        .chart-container { height: 350px; width: 100%; margin-top: 1rem; }

        /* å†å²åˆ—è¡¨ */
        .history-item { 
            background: #fff; 
            padding: 1rem; 
            margin-bottom: 0.8rem; 
            border-radius: 8px; 
            display: flex; 
            justify-content: space-between; 
            cursor: pointer; 
            transition: 0.2s; 
            border: 1px solid #e2e8f0; 
        }
        .history-item:hover { border-color: var(--primary); transform: translateX(4px); }

        /* è¯¦æƒ…é¡µæ§åˆ¶ */
        .detail-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem; }
        input[type="date"] { padding: 0.5rem; border-radius: 6px; border: 1px solid #cbd5e1; outline: none; }

        /* è¡¨æ ¼æ ·å¼ */
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th { background: #f1f5f9; text-align: left; padding: 12px; color: #475569; font-size: 0.9rem; }
        td { padding: 12px; border-bottom: 1px solid #f1f5f9; }

        /* çŠ¶æ€é¢œè‰² */
        .profit { color: var(--profit); }
        .loss { color: var(--loss); }
        .badge { padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; color: white; }
        .bg-profit { background: var(--profit); }
        .bg-loss { background: var(--loss); }

        @media (max-width: 600px) {
            .navbar { padding: 1rem; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="logo" style="font-weight: 800; font-size: 1.2rem; color: var(--primary);">TRADE LOG</div>
    <div class="nav-links">
        <button id="btn-home" class="active" onclick="showView('home')">é¦–é¡µæ±‡æ€»</button>
        <button id="btn-detail" onclick="showView('detail')">æ¯æ—¥å¤ç›˜</button>
    </div>
</nav>

<div class="container">
    <div id="view-home" class="view">
        <div class="stats-grid">
            <div class="stat-card"><h3>å½“å‰æ€»èµ„äº§</h3><div class="value">Â¥108,330</div></div>
            <div class="stat-card"><h3>æœ¬æœˆç´¯è®¡ç›ˆäº</h3><div class="value profit">+Â¥8,330</div></div>
            <div class="stat-card"><h3>æœ¬æœˆèƒœç‡</h3><div class="value">62.5%</div></div>
        </div>

        <div class="section">
            <h3>ğŸ“ˆ èµ„äº§å‡€å€¼èµ°åŠ¿ (Equity Curve)</h3>
            <div class="chart-container">
                <canvas id="assetChart"></canvas>
            </div>
        </div>

        <div class="section">
            <h3>ğŸ“… æœ€è¿‘äº¤æ˜“è®°å½•</h3>
            <div id="history-list">
                </div>
        </div>
    </div>

    <div id="view-detail" class="view" style="display: none;">
        <div class="detail-controls">
            <div>
                <label style="font-weight: 600;">å¤ç›˜æ—¥æœŸï¼š</label>
                <input type="date" id="date-picker" onchange="loadDayDetail(this.value)">
            </div>
            <h2 id="detail-title" style="margin:0;">2023-10-27 å¤ç›˜è®°å½•</h2>
        </div>

        <div class="stats-grid">
            <div class="stat-card"><h3>å½“æ—¥ç›ˆäº</h3><div id="day-profit" class="value profit">+Â¥5,230</div></div>
            <div class="stat-card"><h3>æ“ä½œæ•°é‡</h3><div id="day-count" class="value">2 ç¬”</div></div>
            <div class="stat-card"><h3>æ‰§è¡Œè¯„ä»·</h3><div class="value">â­ ä¼˜ç§€</div></div>
        </div>

        <div class="section">
            <h3>ğŸ“œ äº¤æ˜“æ˜ç»†</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ä»£ç åç§°</th>
                            <th>åŠ¨ä½œ</th>
                            <th>æˆäº¤å‡ä»·</th>
                            <th>æ”¶ç›Šç‡</th>
                            <th>é€»è¾‘/åæ€</th>
                        </tr>
                    </thead>
                    <tbody id="detail-table-body">
                        </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // --- æ•°æ®å®šä¹‰ ---
    const db = {
        "2023-10-27": {
            profit: "+Â¥5,230",
            trades: [
                { name: "èµ›åŠ›æ–¯", type: "ä¹°å…¥", price: "82.50", rate: "+3.5%", note: "æ”¾é‡çªç ´å‰æœŸé«˜ç‚¹" },
                { name: "å®å¾·æ—¶ä»£", type: "æ­¢æŸ", price: "192.10", rate: "-1.8%", note: "è·Œç ´å…³é”®ä½æ”¯æ’‘" }
            ]
        },
        "2023-10-26": {
            profit: "-Â¥1,100",
            trades: [
                { name: "è´µå·èŒ…å°", type: "å–å‡º", price: "1750.0", rate: "-0.5%", note: "éœ‡è¡è¡Œæƒ…ï¼Œæ”¶ç¼©æˆ˜çº¿" }
            ]
        }
    };

    const assetHistory = [
        { date: '10-20', val: 100000 },
        { date: '10-21', val: 102500 },
        { date: '10-22', val: 101800 },
        { date: '10-23', val: 105000 },
        { date: '10-24', val: 104200 },
        { date: '10-26', val: 103100 },
        { date: '10-27', val: 108330 }
    ];

    // --- æ ¸å¿ƒé€»è¾‘ ---

    // è§†å›¾åˆ‡æ¢
    function showView(view) {
        document.querySelectorAll('.view').forEach(v => v.style.display = 'none');
        document.querySelectorAll('.nav-links button').forEach(b => b.classList.remove('active'));
        
        document.getElementById(`view-${view}`).style.display = 'block';
        document.getElementById(`btn-${view}`).classList.add('active');
        
        if(view === 'home') renderHistoryList();
    }

    // åˆå§‹åŒ–èµ°åŠ¿å›¾
    function initChart() {
        const ctx = document.getElementById('assetChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: assetHistory.map(d => d.date),
                datasets: [{
                    label: 'è´¦æˆ·å‡€å€¼',
                    data: assetHistory.map(d => d.val),
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    fill: true,
                    tension: 0.4,
                    borderWidth: 3,
                    pointRadius: 5,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { 
                    y: { grid: { color: '#f1f5f9' }, ticks: { callback: v => 'Â¥' + v.toLocaleString() } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    // æ¸²æŸ“é¦–é¡µåˆ—è¡¨
    function renderHistoryList() {
        const list = document.getElementById('history-list');
        list.innerHTML = Object.keys(db).sort().reverse().map(date => `
            <div class="history-item" onclick="viewDetail('${date}')">
                <span style="font-weight: 600;">${date} å¤ç›˜æ—¥å¿—</span>
                <span class="${db[date].profit.includes('+') ? 'profit' : 'loss'}" style="font-weight: 800;">
                    ${db[date].profit}
                </span>
            </div>
        `).join('');
    }

    // åŠ è½½è¯¦æƒ…
    function loadDayDetail(date) {
        const data = db[date];
        const tableBody = document.getElementById('detail-table-body');
        const profitEl = document.getElementById('day-profit');
        const titleEl = document.getElementById('detail-title');
        
        titleEl.innerText = `${date} å¤ç›˜è®°å½•`;
        
        if (data) {
            profitEl.innerText = data.profit;
            profitEl.className = `value ${data.profit.includes('+') ? 'profit' : 'loss'}`;
            document.getElementById('day-count').innerText = `${data.trades.length} ç¬”`;
            
            tableBody.innerHTML = data.trades.map(t => `
                <tr>
                    <td><strong>${t.name}</strong></td>
                    <td><span class="badge ${t.type==='ä¹°å…¥'?'bg-profit':'bg-loss'}">${t.type}</span></td>
                    <td>${t.price}</td>
                    <td class="${t.rate.includes('+')?'profit':'loss'}">${t.rate}</td>
                    <td style="font-size: 0.85rem; color: #64748b;">${t.note}</td>
                </tr>
            `).join('');
        } else {
            tableBody.innerHTML = '<tr><td colspan="5" style="text-align:center; padding: 3rem; color: #94a3b8;">æš‚æ— æ­¤æ—¥æ•°æ®</td></tr>';
            profitEl.innerText = "Â¥0";
            document.getElementById('day-count').innerText = "0 ç¬”";
        }
    }

    // ä»åˆ—è¡¨è·³è½¬
    function viewDetail(date) {
        document.getElementById('date-picker').value = date;
        loadDayDetail(date);
        showView('detail');
    }

    // åˆå§‹åŒ–å¯åŠ¨
    window.onload = () => {
        initChart();
        renderHistoryList();
        // é»˜è®¤å¡«å……é€‰æ‹©å™¨
        document.getElementById('date-picker').value = "2023-10-27";
        loadDayDetail("2023-10-27");
    };
</script>

</body>
</html>
